<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Results</title>
  <meta name="description" content="Chapter 3 Data transformation | Results" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Results" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Results" />
  
  
  

<meta name="author" content="Yajie Zhang" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/detect-resize-0.5.3/jquery.resize.js"></script>
<link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet" />
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<script src="libs/d3-3.5.2/d3.min.js"></script>
<script src="libs/vega-1.4.3/vega.min.js"></script>
<script src="libs/lodash-2.2.1/lodash.min.js"></script>
<script>var lodash = _.noConflict();</script>
<link href="libs/ggvis-0.4.7/css/ggvis.css" rel="stylesheet" />
<script src="libs/ggvis-0.4.7/js/ggvis.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet" />
<script src="libs/highcharts-8.1.2/highcharts.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-3d.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-more.js"></script>
<script src="libs/highcharts-8.1.2/modules/stock.js"></script>
<script src="libs/highcharts-8.1.2/modules/map.js"></script>
<script src="libs/highcharts-8.1.2/modules/annotations.js"></script>
<script src="libs/highcharts-8.1.2/modules/data.js"></script>
<script src="libs/highcharts-8.1.2/modules/drilldown.js"></script>
<script src="libs/highcharts-8.1.2/modules/item-series.js"></script>
<script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-8.1.2/modules/exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/export-data.js"></script>
<script src="libs/highcharts-8.1.2/modules/funnel.js"></script>
<script src="libs/highcharts-8.1.2/modules/heatmap.js"></script>
<script src="libs/highcharts-8.1.2/modules/treemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/sankey.js"></script>
<script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script>
<script src="libs/highcharts-8.1.2/modules/organization.js"></script>
<script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script>
<script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script>
<script src="libs/highcharts-8.1.2/modules/sunburst.js"></script>
<script src="libs/highcharts-8.1.2/modules/vector.js"></script>
<script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script>
<script src="libs/highcharts-8.1.2/modules/xrange.js"></script>
<script src="libs/highcharts-8.1.2/modules/tilemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/venn.js"></script>
<script src="libs/highcharts-8.1.2/modules/gantt.js"></script>
<script src="libs/highcharts-8.1.2/modules/timeline.js"></script>
<script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-8.1.2/modules/bullet.js"></script>
<script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script>
<script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script>
<script src="libs/highcharts-8.1.2/modules/lollipop.js"></script>
<script src="libs/highcharts-8.1.2/modules/series-label.js"></script>
<script src="libs/highcharts-8.1.2/plugins/motion.js"></script>
<script src="libs/highcharts-8.1.2/custom/reset.js"></script>
<script src="libs/highcharts-8.1.2/modules/boost.js"></script>
<script src="libs/highchart-binding-0.8.2/highchart.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">milk_analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#milk-cost-of-production-estimates"><i class="fa fa-check"></i><b>2.1</b> Milk Cost of Production Estimates</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#other-minor-date-set-used"><i class="fa fa-check"></i><b>2.2</b> Other Minor Date Set used</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#data-overview"><i class="fa fa-check"></i><b>3.1</b> Data Overview</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#data-preprocessing"><i class="fa fa-check"></i><b>3.2</b> Data Preprocessing</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#data-transformation-for-interactive-plot"><i class="fa fa-check"></i><b>3.3</b> Data Transformation for Interactive Plot</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#correlogram"><i class="fa fa-check"></i><b>5.1</b> Correlogram</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a>
<ul>
<li class="chapter" data-level="6.1" data-path="interactive-component.html"><a href="interactive-component.html#description-of-the-first-interactive-plot"><i class="fa fa-check"></i><b>6.1</b> Description of the first interactive plot</a></li>
<li class="chapter" data-level="6.2" data-path="interactive-component.html"><a href="interactive-component.html#description-of-the-second-interactive-plot"><i class="fa fa-check"></i><b>6.2</b> Description of the second interactive plot</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Results</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<div id="data-overview" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Data Overview</h2>
<p>We collected most of our data from the United States Department of Agriculture website. The major data set we used, Annual Milk Cost of Production Estimates data by state and the size of operation from 2016 to 2020, is downloadable in the form of an Excel spreadsheet in these following links:
<a href="https://www.ers.usda.gov/webdocs/DataFiles/52180/MilkStates2016%20base.xlsx?v=6376.9">Split by State</a></p>
<p><a href="https://www.ers.usda.gov/webdocs/DataFiles/52180/MilkSizes2016%20base.xlsx?v=6376.9">Split by Size of Operation</a>
)</p>
<p>The 2 data sets, in Excel spreadsheet form, each contains 2 sheets. The first sheet is a pivot table, in which each segmentation, including either U.S. states or sizes of operations, is wide-pivoted and includes specific price-related information, such as items from value of production, operating costs, allocated overhead, and calculated information such as total costs and net value. In the second sheet, each of the pivoted information is in the tabular data sheet format, in which each row in the pivot table, is given an item ID, corresponding to specific items such as hired labor cost, taxes and insurance, gross value of milk sold, etc.</p>
<ol style="list-style-type: decimal">
<li>Due to the nature of the data format, we can only process the tabular data. Therefore we load the second data sheet as a csv into RStudio. We present all the categories in the data below:</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="left">Category</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Gross value of production</td>
</tr>
<tr class="even">
<td align="left">Operating costs</td>
</tr>
<tr class="odd">
<td align="left">Allocated overhead</td>
</tr>
<tr class="even">
<td align="left">Costs listed</td>
</tr>
<tr class="odd">
<td align="left">Net value</td>
</tr>
<tr class="even">
<td align="left">Supporting information</td>
</tr>
</tbody>
</table>
<p><br>
<br></p>
<ol start="2" style="list-style-type: decimal">
<li>Each category correspond to multiple items, and we present all the items below:</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="left">Item</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Milk sold</td>
</tr>
<tr class="even">
<td align="left">Cattle</td>
</tr>
<tr class="odd">
<td align="left">Other income Â¹</td>
</tr>
<tr class="even">
<td align="left">Total, gross value of production</td>
</tr>
<tr class="odd">
<td align="left">Purchased feed</td>
</tr>
<tr class="even">
<td align="left">Homegrown harvested feed</td>
</tr>
<tr class="odd">
<td align="left">Grazed feed</td>
</tr>
<tr class="even">
<td align="left">Total, feed costs</td>
</tr>
<tr class="odd">
<td align="left">Veterinary and medicine</td>
</tr>
<tr class="even">
<td align="left">Bedding and litter</td>
</tr>
<tr class="odd">
<td align="left">Marketing</td>
</tr>
<tr class="even">
<td align="left">Custom services</td>
</tr>
<tr class="odd">
<td align="left">Fuel, lube, and electricity</td>
</tr>
<tr class="even">
<td align="left">Repairs</td>
</tr>
<tr class="odd">
<td align="left">Other, operating costs Â²</td>
</tr>
<tr class="even">
<td align="left">Interest on operating capital</td>
</tr>
<tr class="odd">
<td align="left">Total, operating costs</td>
</tr>
<tr class="even">
<td align="left">Hired labor</td>
</tr>
<tr class="odd">
<td align="left">Opportunity cost of unpaid labor</td>
</tr>
<tr class="even">
<td align="left">Capital recovery of machinery and equipment Â³</td>
</tr>
<tr class="odd">
<td align="left">Opportunity cost of land</td>
</tr>
<tr class="even">
<td align="left">Taxes and insurance</td>
</tr>
<tr class="odd">
<td align="left">General farm overhead</td>
</tr>
<tr class="even">
<td align="left">Total, allocated overhead</td>
</tr>
<tr class="odd">
<td align="left">Total, costs listed</td>
</tr>
<tr class="even">
<td align="left">Value of production less total costs listed</td>
</tr>
<tr class="odd">
<td align="left">Value of production less operating costs</td>
</tr>
<tr class="even">
<td align="left">Milk cows</td>
</tr>
<tr class="odd">
<td align="left">Output per cow</td>
</tr>
</tbody>
</table>
<p><br>
<br></p>
<ol start="3" style="list-style-type: decimal">
<li>Among the data set segmented by state, 7 operation sizes depending on the number of cows in production are included, plus one for U.S. total. We present all the regions as follows:</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="left">Size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Fewer than 50 cows</td>
</tr>
<tr class="even">
<td align="left">50-99 cows</td>
</tr>
<tr class="odd">
<td align="left">100-199 cows</td>
</tr>
<tr class="even">
<td align="left">200-499 cows</td>
</tr>
<tr class="odd">
<td align="left">500-999 cows</td>
</tr>
<tr class="even">
<td align="left">1,000-1,999 cows</td>
</tr>
<tr class="odd">
<td align="left">2,000 cows or more</td>
</tr>
<tr class="even">
<td align="left">All sizes</td>
</tr>
</tbody>
</table>
<p><br>
<br></p>
<ol start="4" style="list-style-type: decimal">
<li>Among the data set segmented by size of operations, include 19 U.S. major production states, plus one for U.S. total. We present all the regions as follows:</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="left">Region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">U.S. total</td>
</tr>
<tr class="even">
<td align="left">California</td>
</tr>
<tr class="odd">
<td align="left">Illinois</td>
</tr>
<tr class="even">
<td align="left">Indiana</td>
</tr>
<tr class="odd">
<td align="left">Iowa</td>
</tr>
<tr class="even">
<td align="left">Kentucky</td>
</tr>
<tr class="odd">
<td align="left">Maine</td>
</tr>
<tr class="even">
<td align="left">Michigan</td>
</tr>
<tr class="odd">
<td align="left">Minnesota</td>
</tr>
<tr class="even">
<td align="left">Missouri</td>
</tr>
<tr class="odd">
<td align="left">New York</td>
</tr>
<tr class="even">
<td align="left">Ohio</td>
</tr>
<tr class="odd">
<td align="left">Oregon</td>
</tr>
<tr class="even">
<td align="left">Pennsylvania</td>
</tr>
<tr class="odd">
<td align="left">Tennessee</td>
</tr>
<tr class="even">
<td align="left">Utah</td>
</tr>
<tr class="odd">
<td align="left">Vermont</td>
</tr>
<tr class="even">
<td align="left">Virginia</td>
</tr>
<tr class="odd">
<td align="left">Washington</td>
</tr>
<tr class="even">
<td align="left">Wisconsin</td>
</tr>
</tbody>
</table>
<p><br>
<br></p>
</div>
<div id="data-preprocessing" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Data Preprocessing</h2>
<ol style="list-style-type: decimal">
<li>We first remove some of the excessive fields, such as the first 2 columns as there is no variations in these 2 fields.
We can easily pick the data we want by filtering from the descriptive columns. For example, we can select all the data in one year, or selecting only the profit items (with item_ID = 950) corresponding to U.S. total.
We may also use dplyr to select the desired columns and perform grouping.</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="left">Region</th>
<th align="right">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">California</td>
<td align="right">0.94</td>
</tr>
<tr class="even">
<td align="left">Illinois</td>
<td align="right">-5.36</td>
</tr>
<tr class="odd">
<td align="left">Indiana</td>
<td align="right">-4.55</td>
</tr>
<tr class="even">
<td align="left">Iowa</td>
<td align="right">-2.17</td>
</tr>
<tr class="odd">
<td align="left">Kentucky</td>
<td align="right">-2.29</td>
</tr>
<tr class="even">
<td align="left">Maine</td>
<td align="right">-6.21</td>
</tr>
<tr class="odd">
<td align="left">Michigan</td>
<td align="right">-4.67</td>
</tr>
<tr class="even">
<td align="left">Minnesota</td>
<td align="right">-2.21</td>
</tr>
<tr class="odd">
<td align="left">Missouri</td>
<td align="right">-6.39</td>
</tr>
<tr class="even">
<td align="left">New York</td>
<td align="right">-6.08</td>
</tr>
<tr class="odd">
<td align="left">Ohio</td>
<td align="right">-3.70</td>
</tr>
<tr class="even">
<td align="left">Oregon</td>
<td align="right">-1.91</td>
</tr>
<tr class="odd">
<td align="left">Pennsylvania</td>
<td align="right">-5.13</td>
</tr>
<tr class="even">
<td align="left">Tennessee</td>
<td align="right">-5.85</td>
</tr>
<tr class="odd">
<td align="left">Utah</td>
<td align="right">-1.63</td>
</tr>
<tr class="even">
<td align="left">Vermont</td>
<td align="right">-6.96</td>
</tr>
<tr class="odd">
<td align="left">Virginia</td>
<td align="right">-3.62</td>
</tr>
<tr class="even">
<td align="left">Washington</td>
<td align="right">-0.72</td>
</tr>
<tr class="odd">
<td align="left">Wisconsin</td>
<td align="right">-0.86</td>
</tr>
</tbody>
</table>
<p><br>
<br></p>
<ol start="2" style="list-style-type: decimal">
<li>In the further analysis, we have also used joins in order to calculate ratios that use one value divided by another. For example, in order to calculate the percentage of milk sold value among the total gross value of production, we can do so:</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.8933121</td>
</tr>
<tr class="even">
<td align="right">0.8796042</td>
</tr>
<tr class="odd">
<td align="right">0.8263209</td>
</tr>
<tr class="even">
<td align="right">0.8824443</td>
</tr>
<tr class="odd">
<td align="right">0.8939394</td>
</tr>
<tr class="even">
<td align="right">0.8931419</td>
</tr>
<tr class="odd">
<td align="right">0.9314111</td>
</tr>
<tr class="even">
<td align="right">0.8289269</td>
</tr>
<tr class="odd">
<td align="right">0.9042609</td>
</tr>
<tr class="even">
<td align="right">0.8868708</td>
</tr>
<tr class="odd">
<td align="right">0.9191710</td>
</tr>
<tr class="even">
<td align="right">0.8996781</td>
</tr>
<tr class="odd">
<td align="right">0.9096126</td>
</tr>
<tr class="even">
<td align="right">0.9029276</td>
</tr>
<tr class="odd">
<td align="right">0.8910192</td>
</tr>
<tr class="even">
<td align="right">0.9075998</td>
</tr>
<tr class="odd">
<td align="right">0.9130237</td>
</tr>
<tr class="even">
<td align="right">0.8927318</td>
</tr>
<tr class="odd">
<td align="right">0.8784615</td>
</tr>
<tr class="even">
<td align="right">0.9050251</td>
</tr>
</tbody>
</table>
<p><br>
<br></p>
<ol start="3" style="list-style-type: decimal">
<li>We can easily use dplyr and tidyr to convert the format of the data from tabular long data to wide tidy data using pivot_wide function. Take the state milk production data for example:</li>
</ol>
<table style="width:100%;">
<colgroup>
<col width="1%" />
<col width="0%" />
<col width="1%" />
<col width="1%" />
<col width="2%" />
<col width="5%" />
<col width="2%" />
<col width="3%" />
<col width="1%" />
<col width="2%" />
<col width="3%" />
<col width="2%" />
<col width="1%" />
<col width="2%" />
<col width="4%" />
<col width="1%" />
<col width="4%" />
<col width="4%" />
<col width="3%" />
<col width="1%" />
<col width="5%" />
<col width="7%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="6%" />
<col width="6%" />
<col width="1%" />
<col width="2%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Region</th>
<th align="right">Year</th>
<th align="right">Milk sold</th>
<th align="right">Cattle</th>
<th align="right">Other income Â¹</th>
<th align="right">Total, gross value of production</th>
<th align="right">Purchased feed</th>
<th align="right">Homegrown harvested feed</th>
<th align="right">Grazed feed</th>
<th align="right">Total, feed costs</th>
<th align="right">Veterinary and medicine</th>
<th align="right">Bedding and litter</th>
<th align="right">Marketing</th>
<th align="right">Custom services</th>
<th align="right">Fuel, lube, and electricity</th>
<th align="right">Repairs</th>
<th align="right">Other, operating costs Â²</th>
<th align="right">Interest on operating capital</th>
<th align="right">Total, operating costs</th>
<th align="right">Hired labor</th>
<th align="right">Opportunity cost of unpaid labor</th>
<th align="right">Capital recovery of machinery and equipment Â³</th>
<th align="right">Opportunity cost of land</th>
<th align="right">Taxes and insurance</th>
<th align="right">General farm overhead</th>
<th align="right">Total, allocated overhead</th>
<th align="right">Total, costs listed</th>
<th align="right">Value of production less total costs listed</th>
<th align="right">Value of production less operating costs</th>
<th align="right">Milk cows</th>
<th align="right">Output per cow</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">U.S. total</td>
<td align="right">2016</td>
<td align="right">16.83</td>
<td align="right">1.47</td>
<td align="right">0.54</td>
<td align="right">18.84</td>
<td align="right">6.68</td>
<td align="right">2.63</td>
<td align="right">0.07</td>
<td align="right">9.38</td>
<td align="right">0.77</td>
<td align="right">0.20</td>
<td align="right">0.18</td>
<td align="right">0.67</td>
<td align="right">0.52</td>
<td align="right">0.61</td>
<td align="right">0</td>
<td align="right">0.03</td>
<td align="right">12.36</td>
<td align="right">1.83</td>
<td align="right">1.71</td>
<td align="right">3.77</td>
<td align="right">0.02</td>
<td align="right">0.18</td>
<td align="right">0.53</td>
<td align="right">8.04</td>
<td align="right">20.40</td>
<td align="right">-1.56</td>
<td align="right">6.48</td>
<td align="right">245</td>
<td align="right">21698</td>
</tr>
<tr class="even">
<td align="left">U.S. total</td>
<td align="right">2017</td>
<td align="right">18.25</td>
<td align="right">1.37</td>
<td align="right">0.50</td>
<td align="right">20.12</td>
<td align="right">6.49</td>
<td align="right">2.72</td>
<td align="right">0.07</td>
<td align="right">9.28</td>
<td align="right">0.75</td>
<td align="right">0.19</td>
<td align="right">0.18</td>
<td align="right">0.65</td>
<td align="right">0.59</td>
<td align="right">0.62</td>
<td align="right">0</td>
<td align="right">0.06</td>
<td align="right">12.32</td>
<td align="right">1.87</td>
<td align="right">1.77</td>
<td align="right">3.86</td>
<td align="right">0.02</td>
<td align="right">0.18</td>
<td align="right">0.54</td>
<td align="right">8.24</td>
<td align="right">20.56</td>
<td align="right">-0.44</td>
<td align="right">7.80</td>
<td align="right">245</td>
<td align="right">21698</td>
</tr>
<tr class="odd">
<td align="left">U.S. total</td>
<td align="right">2018</td>
<td align="right">16.82</td>
<td align="right">1.26</td>
<td align="right">0.50</td>
<td align="right">18.58</td>
<td align="right">6.76</td>
<td align="right">3.12</td>
<td align="right">0.08</td>
<td align="right">9.96</td>
<td align="right">0.76</td>
<td align="right">0.20</td>
<td align="right">0.18</td>
<td align="right">0.66</td>
<td align="right">0.67</td>
<td align="right">0.64</td>
<td align="right">0</td>
<td align="right">0.14</td>
<td align="right">13.21</td>
<td align="right">1.99</td>
<td align="right">1.82</td>
<td align="right">4.00</td>
<td align="right">0.03</td>
<td align="right">0.18</td>
<td align="right">0.55</td>
<td align="right">8.57</td>
<td align="right">21.78</td>
<td align="right">-3.20</td>
<td align="right">5.37</td>
<td align="right">245</td>
<td align="right">21698</td>
</tr>
<tr class="even">
<td align="left">U.S. total</td>
<td align="right">2019</td>
<td align="right">19.26</td>
<td align="right">1.23</td>
<td align="right">0.53</td>
<td align="right">21.02</td>
<td align="right">7.20</td>
<td align="right">3.33</td>
<td align="right">0.07</td>
<td align="right">10.60</td>
<td align="right">0.78</td>
<td align="right">0.20</td>
<td align="right">0.19</td>
<td align="right">0.67</td>
<td align="right">0.69</td>
<td align="right">0.66</td>
<td align="right">0</td>
<td align="right">0.14</td>
<td align="right">13.93</td>
<td align="right">2.10</td>
<td align="right">1.88</td>
<td align="right">4.10</td>
<td align="right">0.02</td>
<td align="right">0.18</td>
<td align="right">0.57</td>
<td align="right">8.85</td>
<td align="right">22.78</td>
<td align="right">-1.76</td>
<td align="right">7.09</td>
<td align="right">245</td>
<td align="right">21698</td>
</tr>
<tr class="odd">
<td align="left">U.S. total</td>
<td align="right">2020</td>
<td align="right">18.87</td>
<td align="right">1.27</td>
<td align="right">0.51</td>
<td align="right">20.65</td>
<td align="right">6.93</td>
<td align="right">3.11</td>
<td align="right">0.07</td>
<td align="right">10.11</td>
<td align="right">0.78</td>
<td align="right">0.20</td>
<td align="right">0.18</td>
<td align="right">0.67</td>
<td align="right">0.58</td>
<td align="right">0.67</td>
<td align="right">0</td>
<td align="right">0.03</td>
<td align="right">13.22</td>
<td align="right">2.20</td>
<td align="right">1.92</td>
<td align="right">4.13</td>
<td align="right">0.02</td>
<td align="right">0.18</td>
<td align="right">0.58</td>
<td align="right">9.03</td>
<td align="right">22.25</td>
<td align="right">-1.60</td>
<td align="right">7.43</td>
<td align="right">245</td>
<td align="right">21698</td>
</tr>
</tbody>
</table>
<p><br>
<br></p>
</div>
<div id="data-transformation-for-interactive-plot" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Data Transformation for Interactive Plot</h2>
<ol style="list-style-type: decimal">
<li>Only used columns Region, Year and Value for the Total, gross value of production for the
interactive plots in section 6. This data file is called totalRevenue.csv</li>
</ol>
<table>
<caption><span id="tab:unnamed-chunk-15">Table 3.1: </span>Variable Used for Interactive Plot</caption>
<thead>
<tr class="header">
<th align="left">Region</th>
<th align="right">Year</th>
<th align="right">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">U.S. total</td>
<td align="right">2016</td>
<td align="right">18.84</td>
</tr>
<tr class="even">
<td align="left">U.S. total</td>
<td align="right">2017</td>
<td align="right">20.12</td>
</tr>
<tr class="odd">
<td align="left">U.S. total</td>
<td align="right">2018</td>
<td align="right">18.58</td>
</tr>
<tr class="even">
<td align="left">U.S. total</td>
<td align="right">2019</td>
<td align="right">21.02</td>
</tr>
<tr class="odd">
<td align="left">U.S. total</td>
<td align="right">2020</td>
<td align="right">20.65</td>
</tr>
<tr class="even">
<td align="left">California</td>
<td align="right">2016</td>
<td align="right">18.19</td>
</tr>
<tr class="odd">
<td align="left">California</td>
<td align="right">2017</td>
<td align="right">19.61</td>
</tr>
</tbody>
</table>
<p><br>
<br></p>
<ol start="2" style="list-style-type: decimal">
<li>Changed the TotalRevenue.csv a little bit by using pivot_wider, so it is easier to use in
the interactive plot section. This data file is called totalRevenue_n.csv</li>
</ol>
<table>
<caption><span id="tab:unnamed-chunk-16">Table 3.2: </span>Pivot Wider version of totalRevenue.csv</caption>
<thead>
<tr class="header">
<th align="left">Region</th>
<th align="right">2016</th>
<th align="right">2017</th>
<th align="right">2018</th>
<th align="right">2019</th>
<th align="right">2020</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">U.S. total</td>
<td align="right">18.84</td>
<td align="right">20.12</td>
<td align="right">18.58</td>
<td align="right">21.02</td>
<td align="right">20.65</td>
</tr>
<tr class="even">
<td align="left">California</td>
<td align="right">18.19</td>
<td align="right">19.61</td>
<td align="right">18.73</td>
<td align="right">21.31</td>
<td align="right">21.17</td>
</tr>
</tbody>
</table>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yajiez11/Milk_Analysis/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/yajiez11/Milk_Analysis/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
