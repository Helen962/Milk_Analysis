[["data-transformation.html", "Chapter 3 Data transformation 3.1 Data Overview 3.2 Data Preprocessing 3.3 Data Transformation for Interactive Plot", " Chapter 3 Data transformation 3.1 Data Overview We collected most of our data from the United States Department of Agriculture website. The major data set we used, Annual Milk Cost of Production Estimates data by state and the size of operation from 2016 to 2020, is downloadable in the form of an Excel spreadsheet in these following links: Split by State Split by Size of Operation ) The 2 data sets, in Excel spreadsheet form, each contains 2 sheets. The first sheet is a pivot table, in which each segmentation, including either U.S. states or sizes of operations, is wide-pivoted and includes specific price-related information, such as items from value of production, operating costs, allocated overhead, and calculated information such as total costs and net value. In the second sheet, each of the pivoted information is in the tabular data sheet format, in which each row in the pivot table, is given an item ID, corresponding to specific items such as hired labor cost, taxes and insurance, gross value of milk sold, etc. Due to the nature of the data format, we can only process the tabular data. Therefore we load the second data sheet as a csv into RStudio. We present all the categories in the data below: Category Gross value of production Operating costs Allocated overhead Costs listed Net value Supporting information Each category correspond to multiple items, and we present all the items below: Item Milk sold Cattle Other income Â¹ Total, gross value of production Purchased feed Homegrown harvested feed Grazed feed Total, feed costs Veterinary and medicine Bedding and litter Marketing Custom services Fuel, lube, and electricity Repairs Other, operating costs Â² Interest on operating capital Total, operating costs Hired labor Opportunity cost of unpaid labor Capital recovery of machinery and equipment Â³ Opportunity cost of land Taxes and insurance General farm overhead Total, allocated overhead Total, costs listed Value of production less total costs listed Value of production less operating costs Milk cows Output per cow Among the data set segmented by state, 7 operation sizes depending on the number of cows in production are included, plus one for U.S. total. We present all the regions as follows: Size Fewer than 50 cows 50-99 cows 100-199 cows 200-499 cows 500-999 cows 1,000-1,999 cows 2,000 cows or more All sizes Among the data set segmented by size of operations, include 19 U.S. major production states, plus one for U.S. total. We present all the regions as follows: Region U.S. total California Illinois Indiana Iowa Kentucky Maine Michigan Minnesota Missouri New York Ohio Oregon Pennsylvania Tennessee Utah Vermont Virginia Washington Wisconsin 3.2 Data Preprocessing We first remove some of the excessive fields, such as the first 2 columns as there is no variations in these 2 fields. We can easily pick the data we want by filtering from the descriptive columns. For example, we can select all the data in one year, or selecting only the profit items (with item_ID = 950) corresponding to U.S. total. We may also use dplyr to select the desired columns and perform grouping. Region Value California 0.94 Illinois -5.36 Indiana -4.55 Iowa -2.17 Kentucky -2.29 Maine -6.21 Michigan -4.67 Minnesota -2.21 Missouri -6.39 New York -6.08 Ohio -3.70 Oregon -1.91 Pennsylvania -5.13 Tennessee -5.85 Utah -1.63 Vermont -6.96 Virginia -3.62 Washington -0.72 Wisconsin -0.86 In the further analysis, we have also used joins in order to calculate ratios that use one value divided by another. For example, in order to calculate the percentage of milk sold value among the total gross value of production, we can do so: x 0.8933121 0.8796042 0.8263209 0.8824443 0.8939394 0.8931419 0.9314111 0.8289269 0.9042609 0.8868708 0.9191710 0.8996781 0.9096126 0.9029276 0.8910192 0.9075998 0.9130237 0.8927318 0.8784615 0.9050251 We can easily use dplyr and tidyr to convert the format of the data from tabular long data to wide tidy data using pivot_wide function. Take the state milk production data for example: Region Year Milk sold Cattle Other income Â¹ Total, gross value of production Purchased feed Homegrown harvested feed Grazed feed Total, feed costs Veterinary and medicine Bedding and litter Marketing Custom services Fuel, lube, and electricity Repairs Other, operating costs Â² Interest on operating capital Total, operating costs Hired labor Opportunity cost of unpaid labor Capital recovery of machinery and equipment Â³ Opportunity cost of land Taxes and insurance General farm overhead Total, allocated overhead Total, costs listed Value of production less total costs listed Value of production less operating costs Milk cows Output per cow U.S. total 2016 16.83 1.47 0.54 18.84 6.68 2.63 0.07 9.38 0.77 0.20 0.18 0.67 0.52 0.61 0 0.03 12.36 1.83 1.71 3.77 0.02 0.18 0.53 8.04 20.40 -1.56 6.48 245 21698 U.S. total 2017 18.25 1.37 0.50 20.12 6.49 2.72 0.07 9.28 0.75 0.19 0.18 0.65 0.59 0.62 0 0.06 12.32 1.87 1.77 3.86 0.02 0.18 0.54 8.24 20.56 -0.44 7.80 245 21698 U.S. total 2018 16.82 1.26 0.50 18.58 6.76 3.12 0.08 9.96 0.76 0.20 0.18 0.66 0.67 0.64 0 0.14 13.21 1.99 1.82 4.00 0.03 0.18 0.55 8.57 21.78 -3.20 5.37 245 21698 U.S. total 2019 19.26 1.23 0.53 21.02 7.20 3.33 0.07 10.60 0.78 0.20 0.19 0.67 0.69 0.66 0 0.14 13.93 2.10 1.88 4.10 0.02 0.18 0.57 8.85 22.78 -1.76 7.09 245 21698 U.S. total 2020 18.87 1.27 0.51 20.65 6.93 3.11 0.07 10.11 0.78 0.20 0.18 0.67 0.58 0.67 0 0.03 13.22 2.20 1.92 4.13 0.02 0.18 0.58 9.03 22.25 -1.60 7.43 245 21698 3.3 Data Transformation for Interactive Plot Only used columns Region, Year and Value for the Total, gross value of production for the interactive plots in section 6. This data file is called totalRevenue.csv Table 3.1: Variable Used for Interactive Plot Region Year Value U.S. total 2016 18.84 U.S. total 2017 20.12 U.S. total 2018 18.58 U.S. total 2019 21.02 U.S. total 2020 20.65 California 2016 18.19 California 2017 19.61 Changed the TotalRevenue.csv a little bit by using pivot_wider, so it is easier to use in the interactive plot section. This data file is called totalRevenue_n.csv Table 3.2: Pivot Wider version of totalRevenue.csv Region 2016 2017 2018 2019 2020 U.S. total 18.84 20.12 18.58 21.02 20.65 California 18.19 19.61 18.73 21.31 21.17 "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
